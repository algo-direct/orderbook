import subprocess
import signal
import time
import sys

children = []

def signal_handler(sig, frame):
    print(f"Caught signal {sig}, terminating children...")
    for child in children:
        child.terminate()
        child.wait()
    print(f"terminated")
    sys.exit(0)

signal.signal(signal.SIGINT, signal_handler)

p = subprocess.Popen(['bash', 'ncat.sh', "40002", "40001"])
children.append(p)

print("Parent running, press Ctrl+C to terminate...")
while True:
    time.sleep(1)